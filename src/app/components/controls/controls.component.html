<div class="controls" role="region" aria-label="Controls">
  <input type="file" accept=".txt" (change)="onFileSelected($event)" />
  <button (click)="onShuffle()" [disabled]="count === 0">Shuffle</button>
  <button (click)="onSpin()" [disabled]="count === 0">Spin</button>
  <button (click)="onClear()" [disabled]="count === 0">Clear</button>

  <button (click)="onCopyWinner()" [disabled]="!winner">Copy Winner</button>
  @if (winner) { <span>Winner: <strong>{{ winner }}</strong></span> }
  @if (copied) { <span class="toast">Copied!</span> }

  @if (count) { <span class="count">Loaded: {{ count | number }}</span> }

  <button (click)="toggleHistory()" [disabled]="history.length === 0">
    {{ showHistory ? 'Hide' : 'Show' }} history {{ history.length }}
  </button>
</div>

@if (showHistory) {
<div class="history">
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Winner</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody>
      @for (r of history; track r; let i = $index) {
      <tr>
        <td>{{ r.order }}</td>
        <td>{{ r.text }}</td>
        <td>{{ r.timestamp | date:'medium' }}</td>
      </tr>
      }
    </tbody>
  </table>
</div>
}